# mychecklist

## 1. 严禁使用多个与条件

原因：例如3个变量与条件判断 ```if (a == 0 && b == 0 && c == 0)```  其中a有三种取值大于0、小于0、等于0，同理变量b和c也一样。这样3x3x3就会有27种变量组合，**很容易漏掉其中的变量条件组合**。建议罗列清楚所有变量组合条件，拆分这种与条件的写法。

## 2. 一定要处理阻塞接口返回值

很多阻塞接口，例如锁、定时器等接口，不仅存在正常的解锁、超时返回等，也有被系统信号打断阻塞的情况。一定要处理这种异常的阻塞失效情况，否则导致锁、定时器状态紊乱。建议：使用系统提供的阻塞接口时，一定要查看man手册中关于接口返回的情况，以及返回的错误码等信息。

## 3. 外部接口一定要使用规范的入参检查

对外提供的接口，入参检查要严格，不能不检查，也不能使用assert等方式检查。需要使用if等条件，强制判断入参有效性

## 4. 函数使用前一定要声明

使用未声明的函数，编译器将返回值一律按int处理，指针类型的话，就会截断。导致非法的地址访问。

## 5. 读源码的建议
例如读linux进程结构体的源码前，大概想一想你自己会怎么设计，进程是资源分配单位，那他管理那些资源呢内存，文件系统，文件描述符，信号，自身状态等。使用自己的设计思想来验证源码。

## 6. 代码分层
例如处理数据包时，有包头长度的定义，有内部分段长度的定义等等，这种情况下 第一层只处理包头定义的长度分包情况，第二层函数处理内部分段长度的分包情况，不要将包头长度和分段长度一起处理。
